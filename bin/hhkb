#! /bin/sh

if lsusb | grep -q Chicony
then
	xmodmap $HOME/.Xmodmap.hhkb
	xmodmap -e 'add shift = Shift_L'
	xmodmap -e 'add shift = Shift_R'
	xmodmap -e 'add control = Control_L'
else
	# not really Happy Hacking
	setxkbmap -option compose:rctrl -option nbsp:none -option ctrl:nocaps 'no(nodeadkeys)'
fi

# not really Keyboard

if synclient -l 2>/dev/null | tr -d ' ' | grep -q 'HorizEdgeScroll=0'
then
    # Enable horizontal scrolling when dragging along the bottom edge.
    synclient HorizEdgeScroll=1
fi

xrandr | awk '$2 == "connected" {
	if (sz && $3 < sz)
		system("xrandr --output " $1 " --left-of " out);
	out = $1; sz = $3
}'

# override cursor font with big cursor at Gumby position (56)
xset +fp $HOME/lib/X11/fonts
